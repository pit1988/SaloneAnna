DELIMITER $
CREATE PROCEDURE InserimentoAppuntamentoCliente
(
IN aCodCliente INT, 
IN aDataOra DATETIME, 
IN aSconto DOUBLE, 
IN aCosto DOUBLE, 
IN aTipo ENUM ('shampoo', 'taglio', 'piega e phon', 'piega e casco', 'ondulazione', 'colore', 'riflessante', 'decolorazione', 'meches', 'trattamenti', 'manicure/pedicure'))

BEGIN
DECLARE CodiceApp INT;
INSERT INTO Appuntamenti(DataOra, Costo) VALUES (ADataOra, aCosto);

SELECT CodAppuntamento INTO CodiceApp FROM Appuntamenti WHERE DataOra=aDataOra AND Costo=aCosto;

INSERT INTO AppuntamentiClienti(CodAppuntamento, CodCliente, Sconto, TipoAppuntamento) VALUES (CodiceApp, aCodCliente, aSconto, aTipo);

END $
DELIMITER ;

