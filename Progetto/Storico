DELIMITER $
CREATE FUNCTION Storico(aCodCliente INT) 
RETURNS @cronologia TABLE(codAppuntamento INT, DataOra DATETIME, CodProdotto INT, NomeProdotto VARCHAR(20), QuantitaUtilizzata DOUBLE)
BEGIN
	
	RETURN (SELECT a.CodAppuntamento, a.DataOra, pa.CodProdotto, pr.Nome, pa.Utilizzo
	FROM AppuntamentiClienti a NATURAL JOIN ProdApp pa NATURAL JOIN Prodotti pr
	WHERE a.CodCliente=aCodCliente);
END $
delimiter ;
